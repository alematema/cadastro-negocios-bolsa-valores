<!DOCTYPE html>
<html>

<head>

	<meta charset="UTF-8">
	<title>Negociações</title>
	<link rel="stylesheet" href="css/bootstrap.css">
	<link rel="stylesheet" href="css/bootstrap-theme.css">

</head>

<body class="container">

	<h1 class="text-center">Negociações</h1>
	<div id='mensagem-view'></div>
	<form class="form" onsubmit="negociacaoController.adiciona(event);">

		<div class="form-group">
			<label for="data">Data</label>
			<input type="date" id="data" class="form-control" required autofocus/>
		</div>

		<div class="form-group">
			<label for="quantidade">Quantidade</label>
			<input type="number" min="1" step="1" id="quantidade" class="form-control" value="1" required/>
		</div>

		<div class="form-group">
			<label for="valor">Valor</label>
			<input id="valor" type="number" class="form-control" min="0.01" step="0.01" value="0.0" required />
		</div>

		<button class="btn btn-primary" type="submit">Incluir</button>
	</form>

	<div class="text-center">
		<button class="btn btn-primary text-center" type="button">
            Importar Negociações
        </button>
		<button onclick="negociacaoController.apaga()" class="btn btn-primary text-center" type="button">
            Apagar
        </button>
	</div>
	<br>
	<br>

	<div id='negociacoes-view'></div>

	<script src="js/app/views/View.js"></script>
	<script src="js/app/models/Negociacao.js"></script>
	<script src="js/app/controllers/NegociacaoController.js"></script>
	<script src="js/app/helpers/DateHelper.js"></script>
	<script src="js/app/models/ListaNegociacoes.js"></script>
	<script src="js/app/views/NegociacoesView.js"></script>
	<script src="js/app/models/Mensagem.js"></script>
	<script src="js/app/views/MensagemView.js"></script>
	<script src="js/app/services/ProxyFactory.js"></script>
	<script src="js/app/helpers/Bind.js"></script>


	<script>
		
		let negociacaoController = new NegociacaoController();

	</script>

	<script>
		//		let negociacao = new Proxy(new Negociacao(new Date(), 1, 100), {
		//			
		//			 get : function(target, prop, receiver){
		//				 
		//				 console.log(`A propriedade "${prop}"  foi interceptada... mas ainda nao lida... rs`);
		//					
		//				 return Reflect.get(target, prop, receiver);
		//			 }				
		//			
		//		});
		//		
		//		
		//		
		//		console.log(negociacao.quantidade);
		//		console.log(negociacao.valor);

		//		let negociacao = new Proxy(new Negociacao(new Date(), 1, 100), {
		//			
		//			 set : function(target, prop, value, receiver){
		//				 
		//				 console.log(`"${prop}" : actual value = ${target[prop]}; new value = ${value}.`);
		//					
		//				 return Reflect.set(target, prop, value, receiver);
		//			 }				
		//			
		//		});
		//		
		//		
		//		negociacao.quantidade = 10;
		//		negociacao.valor = 100;

//		let lista = new Proxy(new ListaNegociacoes(), {
//
//			get: function(target, prop, receiver) {
//
//				if (['add', 'esvazia'].includes(prop) && (typeof(target[prop]) == typeof(Function))) {
//
//					return function() {
//
//						console.log(`interceptando ${prop} `);
//						Reflect.apply(target[prop], target, arguments );
//
//					}
//
//				} 
//
//				return Reflect.get(target, prop, receiver);
//				
//			}
//
//		});
//
//
//		lista.add(new Negociacao(new Date(), 1, 100));
//		lista.esvazia()

	</script>

</body>

</html>
